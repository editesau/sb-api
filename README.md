# sb-api
API для котиков, доработанное, которое умение присылать не только статус код 200 :)

## Enpoints: \<METHOD\> \<URL\>

**GET** /sb-api/\<user\>/cats 
- Возвращает всех котиков в виде массива объектов и статус код 200
- Если котиков нет вернет статус код 204
- В случае ошибки сервера вернет статус код 500 и ошибку

**GET** /sb-api/\<user\>/cats/\<id\>
- Возвращает котика с id в виде объекта
- Если котиков нет вернет статус код 204
- В случае ошибки сервера вернет статус код 500 и ошибку

**POST** /sb-api/\<user\>/cats/
- Создает котика с заданными параметрами
 `name: { type: String, required: true },
    description: { type: String },
    age: { type: Number },
    favourite: { type: Boolean },
    rate: { type: Number },
    img_link: { type: String }`
    свойство `name` является обязательным
- Если котик успешно создан вернет статус код 201 и вашего созданного котика в виде объекта, которому добавится свойство _id
- В случае ошибки сервера вернет статус код 400 и ошибку

**PUT** /sb-api/\<user\>/cats/\<id\>
- Изменяет свойства котика с id (параметры можно передать теже, что и при создании)
- Если изменения пройдут успешно - вернет статус код 200 и обновленного котика в виде объекта
- Если котиков с таким id не найден - вернет статус код 400 и ошибку
- В случае ошибки сервера вернет статус код 500 и ошибку

**PATCH** /sb-api/\<user\>/cats/\<id\>
- Изменяет одно свойства котика с id (например {age: 10})
- Если изменения пройдут успешно - вернет статус код 200 и обновленного котика в виде объекта
- Если котиков с таким id не найден - вернет статус код 400 и ошибку
- В случае ошибки сервера вернет статус код 500 и ошибку

**DELETE** /sb-api/\<user\>/cats/\<id\>
- Удаляет котика с id
- Если котик удалится успешно - вернет статус код 204
- Если котиков с таким id не найден - вернет статус код 400 и ошибку
- В случае ошибки сервера вернет статус код 500 и ошибку

## Error Object
Ошибки в случае 4хх и 5хх имеют следующий вид: 
- если в операции есть id:
{ error: { message: \<текст ошибки\>, method: \<метод запроса\>, requestedID: \<id\> } }
- если id не присутствует, например GET /sb-api/\<user\>/cats, все тоже самое, но свойство requestedID будет отсутствовать.

- Пример попытки получить котика с id, которого не существует:
{
    "error": {
        "message": "Can't find cat with provided ID.",
        "method": "GET",
        "requestedID": "637d6229c9d43a600a29c424"
    }
}

## P.S.
Также присутствует валидатор передаваемых данных, то есть абы что передать нельзя, только строгий набор свойств, который описан в методе добавление котика, любое лишнее свойство вернет вам ошибку, также проверяется соответсвие типа, от себя добавил проверку на рейтинг (свойство rate) от 0 до 10 и возраст (age) от 0 до 50.

## How to connect
API доступно по адресу: https://dsegorus.fvds.ru/<endpoint>, 
например https://dsegorus.fvds.ru/sb-cats/editesau/cats
Если будут вопросы/замечания пишите в чатике или в личку @editesau
Надеюсь не зря потратил время)
